<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>User Profile | CraftMyCareer</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="css/theme.css" />
    <link rel="stylesheet" href="css/styles.css" />
  </head>
  <body>
    <nav class="navbar">
      <div class="nav-logo-container">
        <img src="assets/logo.png" alt="Logo" class="nav-logo" />
        <a href="index.html" class="nav-brand">CraftMyCareer</a>
      </div>
      <ul class="nav-links">
        <li><a href="index.html">Home</a></li>
        <li><a href="builder.html">Builder</a></li>
        <li><a href="templates.html">Templates</a></li>
        <li><a href="about.html">About Us</a></li>
      </ul>
      <div class="nav-actions">
        <button
          id="theme-toggle"
          style="display: flex; align-items: center; justify-content: center"
        >
          <span class="material-icons">dark_mode</span>
        </button>
        <a
          href="builder.html"
          class="btn btn-outline"
          style="
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
          "
        >
          <span class="material-icons" style="font-size: 1.2rem"
            >arrow_back</span
          >
          Back
        </a>
        <div class="hamburger-menu" id="hamburger-menu">
          <span></span>
          <span></span>
          <span></span>
        </div>
      </div>
    </nav>

    <!-- Mobile Menu -->
    <div class="mobile-menu" id="mobile-menu">
      <ul class="mobile-menu-links">
        <li><a href="index.html">Home</a></li>
        <li><a href="builder.html">Builder</a></li>
        <li><a href="templates.html">Templates</a></li>
        <li><a href="about.html">About Us</a></li>
      </ul>
    </div>

    <div class="container" style="margin-top: 2rem">
      <div class="profile-grid">
        <!-- Left Sidebar -->
        <div class="profile-sidebar card">
          <div class="sidebar-menu">
            <button
              class="sidebar-item active"
              onclick="showSection('personal')"
            >
              <span class="material-icons">person</span> Personal Info
            </button>
            <button class="sidebar-item" onclick="showSection('security')">
              <span class="material-icons">security</span> Security
            </button>
            <button class="sidebar-item" onclick="showSection('preferences')">
              <span class="material-icons">settings</span> Preferences
            </button>
          </div>

          <div class="sidebar-footer">
            <button class="sidebar-item logout-btn" onclick="logout()">
              <span class="material-icons">logout</span> Logout
            </button>
          </div>
        </div>

        <!-- Right Content Area -->
        <div class="profile-content card">
          <!-- Personal Info Section -->
          <div id="section-personal" class="content-section active">
            <h2 style="margin-bottom: 0.5rem">Personal Information</h2>
            <p style="color: var(--text-muted); margin-bottom: 2rem">
              Manage your personal details.
            </p>

            <form onsubmit="event.preventDefault(); saveSettings();">
              <label>Full Name</label>
              <input type="text" id="profileName" placeholder="John Doe" />

              <label>Email Address</label>
              <input
                type="email"
                id="profileEmail"
                placeholder="john@example.com"
              />

              <button
                type="submit"
                class="btn btn-primary"
                style="margin-top: 1rem"
              >
                Save Changes
              </button>
            </form>
          </div>

          <!-- Security Section -->
          <div id="section-security" class="content-section">
            <h2 style="margin-bottom: 0.5rem">Security</h2>
            <p style="color: var(--text-muted); margin-bottom: 2rem">
              Update your password and security settings.
            </p>

            <form onsubmit="event.preventDefault(); saveSettings();">
              <label>Current Password</label>
              <input type="password" placeholder="••••••••" />

              <label>New Password</label>
              <input
                type="password"
                placeholder="Leave blank to keep current"
              />

              <button
                type="submit"
                class="btn btn-primary"
                style="margin-top: 1rem"
              >
                Update Password
              </button>
            </form>
          </div>

          <!-- Preferences Section -->
          <div id="section-preferences" class="content-section">
            <h2 style="margin-bottom: 0.5rem">Preferences</h2>
            <p style="color: var(--text-muted); margin-bottom: 2rem">
              Customize your experience.
            </p>

            <form onsubmit="event.preventDefault(); saveSettings();">
              <label>Theme</label>
              <select id="themeSelect" style="margin-bottom: 1rem">
                <option value="light">Light</option>
                <option value="dark">Dark</option>
              </select>

              <label>Target Role</label>
              <input
                type="text"
                id="profileRole"
                placeholder="e.g. Full Stack Developer"
              />

              <label>Experience Level</label>
              <select id="profileLevel">
                <option value="">Select Level</option>
                <option value="Student">Student</option>
                <option value="Fresher">Fresher</option>
                <option value="Professional">Professional</option>
              </select>

              <button
                type="submit"
                class="btn btn-primary"
                style="margin-top: 1rem"
              >
                Save Preferences
              </button>
            </form>
          </div>
        </div>
      </div>
    </div>

    <script src="js/themeToggle.js"></script>

    <script>
      // Tab Switching Logic
      function showSection(sectionId) {
        // Update Sidebar Active State
        document.querySelectorAll(".sidebar-item").forEach((item) => {
          item.classList.remove("active");
          if (item.getAttribute("onclick").includes(sectionId)) {
            item.classList.add("active");
          }
        });

        // Show Content
        document.querySelectorAll(".content-section").forEach((section) => {
          section.classList.remove("active");
        });
        document.getElementById("section-" + sectionId).classList.add("active");
      }

      // Load existing data
      document.addEventListener("DOMContentLoaded", () => {
        const data = JSON.parse(localStorage.getItem("resumeData")) || {};
        if (data.fullName)
          document.getElementById("profileName").value = data.fullName;
        if (data.email)
          document.getElementById("profileEmail").value = data.email;
        if (data.role) document.getElementById("profileRole").value = data.role;
        if (data.experienceLevel)
          document.getElementById("profileLevel").value = data.experienceLevel;

        const prefersDark = window.matchMedia(
          "(prefers-color-scheme: dark)"
        ).matches;
        const currentTheme = prefersDark ? "dark" : "light";
        document.getElementById("themeSelect").value = currentTheme;
      });

      function saveSettings() {
        const name = document.getElementById("profileName").value;
        const email = document.getElementById("profileEmail").value;
        const role = document.getElementById("profileRole").value;
        const level = document.getElementById("profileLevel").value;
        const theme = document.getElementById("themeSelect").value;

        // Update Resume Data
        const data = JSON.parse(localStorage.getItem("resumeData")) || {};
        data.fullName = name;
        data.email = email;
        data.role = role;
        data.experienceLevel = level;
        localStorage.setItem("resumeData", JSON.stringify(data));

        // Update Theme
        document.documentElement.setAttribute("data-theme", theme);
        // localStorage.setItem("theme", theme); // Disabled for default System Mode

        // Update Toggle Button Icon if it exists
        const toggleBtn = document.getElementById("theme-toggle");
        if (toggleBtn) {
          const iconSpan = toggleBtn.querySelector(".material-icons");
          if (iconSpan)
            iconSpan.textContent =
              theme === "dark" ? "light_mode" : "dark_mode";
        }

        alert("Settings saved successfully!");
      }

      function logout() {
        // Clear session if needed, for now just redirect
        window.location.href = "index.html";
      }

      document.addEventListener("DOMContentLoaded", () => {
        // Hamburger menu functionality
        const hamburger = document.getElementById("hamburger-menu");
        const mobileMenu = document.getElementById("mobile-menu");
        const body = document.body;

        if (hamburger && mobileMenu) {
          hamburger.addEventListener("click", () => {
            hamburger.classList.toggle("active");
            mobileMenu.classList.toggle("active");
            body.classList.toggle("menu-open");
          });

          // Close menu when clicking on a link
          const mobileLinks = document.querySelectorAll(".mobile-menu-links a");
          mobileLinks.forEach((link) => {
            link.addEventListener("click", () => {
              hamburger.classList.remove("active");
              mobileMenu.classList.remove("active");
              body.classList.remove("menu-open");
            });
          });
        }
      });
    </script>
  </body>
</html>
